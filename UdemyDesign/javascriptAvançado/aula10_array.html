<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="js/beluja.js"></script>
</head>
<body>
    <h1>Curso Javascript Completo 2018</h1>
    <h2>Média dos alunos</h2>
    <table class="table js-tabela" >
        <thead>
            <tr>
                <th>Nome</th>
                <th>Nota1</th>
                <th>Nota2</th>
                <th>Nota3</th>
                <th>Nota4</th>
                <th>Média</th>
            </tr>
        </thead>
        <tbody>
            <tr class="aluno">
                <td class="aluno-nome">Gertrude</td>
                <td class="aluno-n1">10</td>
                <td class="aluno-n2">8.5</td>
                <td class="aluno-n3">9</td>
                <td class="aluno-n4">7.5</td>
                <td class="aluno-m"></td>
            </tr>
            <tr class="aluno">
                <td class="aluno-nome">Rey</td>
                <td class="aluno-n1">0</td>
                <td class="aluno-n2">8.5</td>
                <td class="aluno-n3">6.5</td>
                <td class="aluno-n4">7.5</td>
                <td class="aluno-m"></td>
            </tr>
            <tr class="aluno">
                <td class="aluno-nome">Pedro</td>
                <td class="aluno-n1">6</td>
                <td class="aluno-n2">8.5</td>
                <td class="aluno-n3">0</td>
                <td class="aluno-n4">8.5</td>
                <td class="aluno-m"></td>
            </tr>
            <tr class="aluno">
                <td class="aluno-nome">Henrique</td>
                <td class="aluno-n1">9</td>
                <td class="aluno-n2">6.5</td>
                <td class="aluno-n3">7</td>
                <td class="aluno-n4">6.5</td>
                <td class="aluno-m"></td>
            </tr>
        </tbody>
    </table>
   
    <script>

        (function(){
            var trs = document.querySelectorAll('.js-tabela tbody .aluno');

            var x = 0;
            while(trs[x]){
                var linhaAluno = trs[x];
                var tds = linhaAluno.querySelectorAll('td');
                var notas = recuperarNumerosColunas(tds);
                

                var temZero = notas.some((nota) =>  nota === 0);
                
                // var temZero = notas.some(function(nota){
                    // return nota === 0;
                // })
                var mensagem = temZero ? 'reprovado': 
                calcularMedia.apply(this,notas);

                //expressao ? bloco verdade : bloco mentira

                linhaAluno.querySelector('.aluno-m').textContent = mensagem;
                x++;
            }

            function recuperarNumerosColunas(tds){
                var x = 0;
                var arr = [];
                while(tds[x]){
                    if(!isNaN(tds[x].textContent) && tds[x].textContent !== ''){
                        arr.push(parseFloat(tds[x].textContent));
                    }
                x++;
                };
                return arr;
            }
            console.log(calcularMedia(...[2,3]));
        })();

    </script>
</body>
</html>